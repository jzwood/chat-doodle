"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}function controller(t){function n(){t.width=s,t.height=l,u.lineWidth=8,u.lineCap="round"}function e(t){return t.touches?[t.touches[0].clientX,t.touches[0].clientY]:[t.clientX,t.clientY]}function o(t){v.isDrawing=!0;var n=e(t),o=_slicedToArray(n,2),r=o[0],i=o[1];v.x1=parseFloat(r.toFixed(d)),v.y1=parseFloat(i.toFixed(d)),v.x2=parseFloat(r.toFixed(d)),v.y2=parseFloat(i.toFixed(d))}function r(t){var n=e(t),o=_slicedToArray(n,2),r=o[0],i=o[1];v.x2=parseFloat(r.toFixed(d)),v.y2=parseFloat(i.toFixed(d))}function i(t){v.isDrawing=!1}function a(t){s=window.innerWidth,l=window.innerHeight,n(),resetNav(),f.forEach(function(t){c.apply(void 0,_toConsumableArray(t.split(",").map(function(t){return parseInt(t)})))})}function c(t,n,e,o){u.fillStyle=m,u.beginPath(),u.moveTo(t,n),u.lineTo(e,o),u.closePath(),u.stroke()}var u=t.getContext("2d"),s=window.innerWidth,l=window.innerHeight,d=0,f=new Set,y=void 0,v={x1:0,y1:0,x2:0,y2:0,isDrawing:!1,step:function(){this.x1=this.x2,this.y1=this.y2}},h="#ffffff",m="#000000";return n(),function(){document.addEventListener("touchstart",o),document.addEventListener("touchmove",r),document.addEventListener("touchend",i),document.addEventListener("mousedown",o),document.addEventListener("mousemove",r),document.addEventListener("mouseup",i),window.addEventListener("resize",debounce(a,100))}(),{line:c,setBackground:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#ffffff";console.log("setBackground"),h=t,u.fillStyle=h,u.fillRect(0,0,s,l),u.fillStyle=t},clearBackground:function(){console.log("clearBackground"),u.clearRect(0,0,s,l)},setRoom:function(t){y=t},draw:function(){if(v.isDrawing){var t=v,n=[t.x1,t.y1,t.x2,t.y2].join(",");f.has(n)||(socket.emit("pushData",y,{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2}),c(t.x1,t.y1,t.x2,t.y2),f.add(n),t.step())}}}}function resetNav(){var t=document.querySelector(".nav");t.style.height=~~(window.innerWidth/t.childElementCount)+"px"}function start(){var t=document.querySelector(".canvas-wrapper__canvas");if(t.getContext){var n=controller(t);n.setBackground("#ffffff"),resetNav(),socket=io("/");var e=window.location.pathname.slice(-40);n.setRoom(e),socket.emit("init",e),socket.on("linePositionData",function(t){n.line(t.x1,t.y1,t.x2,t.y2)}),socket.on("clear",function(){n.clearBackground(cx2,t)}),MainLoop.setMaxAllowedFPS([60]).setDraw(n.draw).start()}}function avg(t){return t.reduce(function(t,n){return t+n},0)/t.length}function mod(t,n){for(var e=t%n;e<=0;)e+=n;return e}function throttle(t,n){var e=arguments,o=this,r=0;return function(){var i=e,a=o,c=+new Date;c>=r+n&&(r=c,t.apply(a,i))}}function debounce(t,n,e){var o=this,r=arguments,i=void 0;return function(){var a=o,c=r,u=function(){i=null,e||t.apply(a,c)},s=e&&!i;clearTimeout(i),i=setTimeout(u,n),s&&t.apply(a,c)}}var _slicedToArray=function(){function t(t,n){var e=[],o=!0,r=!1,i=void 0;try{for(var a,c=t[Symbol.iterator]();!(o=(a=c.next()).done)&&(e.push(a.value),!n||e.length!==n);o=!0);}catch(t){r=!0,i=t}finally{try{!o&&c.return&&c.return()}finally{if(r)throw i}}return e}return function(n,e){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),io,socket;document.addEventListener("DOMContentLoaded",function(t){start()});
//# sourceMappingURL=main.js.map

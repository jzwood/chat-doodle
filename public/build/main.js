function newController(n){var t=newUser(),e=newAnimator();return{onEnter:function(n,e){13===e&&(t.setRules(),n.emit("clientDataPush",t.getRule()))},update:function(n){e.setState(n)},animate:function(){e.draw()}}}function newAnimator(){var n=[];return{draw:function(){},setState:function(t){n=t.slice(0)}}}function newUser(){function n(n){n.split("/").map(function(n){return n.trim()})}var t=[],e=document.querySelector(".terminal__input");return{readInput:function(){t.push(n(e.textContent))},getRule:function(){return t.slice(-1).toString()}}}function app(n){function t(){var n=location.href.indexOf("/private");socket=io(n>0?"/private":"/public");var t=window.location.pathname.slice(-40);socket.emit("init",t),socket.on("updateBoard",function(n){r.update(n)}),addKeyPressListener(socket,t,r.onEnter)}var e=700,o=25,r=newController(e);newUser();n.setup=function(){console.assert(e%o===0);var r=n.createCanvas(e,e);r.parent("wrapper__canvas"),r.class("wrapper__canvas__p5"),console.log("waiting for network connection");var a=window.setInterval(function(){console.count("attempts"),io&&(console.log("network connected"),t(),window.clearInterval(a))},100)},n.draw=function(){r.animate()}}function addKeyPressListener(n,t,e){var o=500;document.addEventListener("keydown",function(r){r.preventDefault(),throttle(e(n,t,r.keyCode),o)},!1)}function throttle(n,t){var e=0;return function(){var o=arguments,r=this,a=+new Date;a>=e+t&&(e=a,n.apply(r,o))}}var io,socket,p5App=new window.p5(app);
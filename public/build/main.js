"use strict";function controller(t){function n(t){x.isDrawing=!0;var n=[t.touches[0].clientX,t.touches[0].clientY],e=n[0],o=n[1];x.x1=parseFloat((e-u).toFixed(d)),x.y1=parseFloat((o-l).toFixed(d)),x.x2=parseFloat((e-u).toFixed(d)),x.y2=parseFloat((o-l).toFixed(d))}function e(t){x.x2=parseFloat((t.touches[0].clientX-u).toFixed(d)),x.y2=parseFloat((t.touches[0].clientY-l).toFixed(d))}function o(t){x.isDrawing=!1}function i(n){c=window.innerWidth,s=window.innerHeight,u=.5*(c-t.width),l=0*(s-t.height)}function a(t,n,e,o){r.fillStyle=w,r.beginPath(),r.moveTo(t,n),r.lineTo(e,o),r.closePath(),r.stroke()}var r=t.getContext("2d"),c=window.innerWidth,s=window.innerHeight,u=0,l=0,d=0,f=new Set,h=void 0,x={x1:0,y1:0,x2:0,y2:0,isDrawing:!1,step:function(){this.x1=this.x2,this.y1=this.y2}},v="#ffffff",w="#000000";return function(){t.width=c,t.height=s,console.log(t,c,s),r.lineWidth=8,r.lineCap="round"}(),function(){document.addEventListener("touchstart",n),document.addEventListener("touchmove",e),document.addEventListener("touchend",o),window.addEventListener("resize",debounce(i,100))}(),{line:a,setBackground:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#ffffff";console.log("setBackground"),v=t,r.fillStyle=v,r.fillRect(0,0,c,s),r.fillStyle=t},clearBackground:function(){console.log("clearBackground"),r.clearRect(0,0,c,s)},setRoom:function(t){h=t},draw:function(){if(x.isDrawing){var t=x,n=[t.x1,t.y1,t.x2,t.y2].join(",");f.has(n)||(socket.emit("pushData",h,{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2}),a(t.x1,t.y1,t.x2,t.y2),f.add(n),t.step())}}}}function start(){var t=document.querySelector(".canvas-wrapper__canvas");if(t.getContext){var n=controller(t);n.setBackground("#ffffff"),socket=io("/");var e=window.location.pathname.slice(-40);n.setRoom(e),socket.emit("init",e),socket.on("linePositionData",function(t){n.line(t.x1,t.y1,t.x2,t.y2)}),socket.on("clear",function(){n.clearBackground(cx2,t)}),MainLoop.setMaxAllowedFPS([60]).setDraw(n.draw).start()}}function avg(t){return t.reduce(function(t,n){return t+n},0)/t.length}function mod(t,n){for(var e=t%n;e<=0;)e+=n;return e}function throttle(t,n){var e=arguments,o=this,i=0;return function(){var a=e,r=o,c=+new Date;c>=i+n&&(i=c,t.apply(r,a))}}function debounce(t,n,e){var o=this,i=arguments,a=void 0;return function(){var r=o,c=i,s=function(){a=null,e||t.apply(r,c)},u=e&&!a;clearTimeout(a),a=setTimeout(s,n),u&&t.apply(r,c)}}var io,socket;document.addEventListener("DOMContentLoaded",function(t){start()});
//# sourceMappingURL=main.js.map

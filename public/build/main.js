"use strict";function controller(n){function t(n){s.isDrawing=!0;var t=[n.touches[0].clientX,n.touches[0].clientY],e=t[0],o=t[1];s.x1=e-l,s.y1=o-f,s.x2=e-l,s.y2=o-f}function e(n){s.x2=n.touches[0].clientX-l,s.y2=n.touches[0].clientY-f}function o(n){s.isDrawing=!1}function i(t){a=window.innerWidth,u=window.innerHeight,l=.5*(a-n.width),f=0*(u-n.height)}function c(n,t,e,o){r.fillStyle=h,r.beginPath(),r.moveTo(n,t),r.lineTo(e,o),r.closePath(),r.stroke()}var r=n.getContext("2d"),a=window.innerWidth,u=window.innerHeight,l=0,f=0,s={x1:0,y1:0,x2:0,y2:0,isDrawing:!1,step:function(){this.x1=this.x2,this.y1=this.y2}},d="#ffffff",h="#000000";return function(){n.width=a,n.height=u,console.log(n,a,u),r.lineWidth=5,r.lineCap="round"}(),function(){document.addEventListener("touchstart",t),document.addEventListener("touchmove",e),document.addEventListener("touchend",o),window.addEventListener("resize",debounce(i,100))}(),{line:c,setBackground:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#ffffff";console.log("setBackground"),d=n,r.fillStyle=d,r.fillRect(0,0,a,u),r.fillStyle=n},clearBackground:function(){console.log("clearBackground"),r.clearRect(0,0,a,u)},draw:function(){if(s.isDrawing){var n=s;console.log(n.x1,n.y1,n.x2,n.y2),c(n.x1,n.y1,n.x2,n.y2),n.step()}}}}function start(){var n=document.querySelector(".canvas-wrapper__canvas");if(n.getContext){var t=controller(n);t.setBackground("#ffffff");var e=location.href.indexOf("/private");socket=io(e>0?"/private":"/public");var o=window.location.pathname.slice(-40);socket.emit("init",o),socket.on("linePositionData",function(n){t.line(n.x,n.y,n.x2,n.y2)}),socket.on("clear",function(){t.clearBackground(cx2,n)}),MainLoop.setMaxAllowedFPS([60]).setDraw(t.draw).start()}}function avg(n){return n.reduce(function(n,t){return n+t},0)/n.length}function mod(n,t){for(var e=n%t;e<=0;)e+=t;return e}function throttle(n,t){var e=arguments,o=this,i=0;return function(){var c=e,r=o,a=+new Date;a>=i+t&&(i=a,n.apply(r,c))}}function debounce(n,t,e){var o=this,i=arguments,c=void 0;return function(){var r=o,a=i,u=function(){c=null,e||n.apply(r,a)},l=e&&!c;clearTimeout(c),c=setTimeout(u,t),l&&n.apply(r,a)}}var io,socket;document.addEventListener("DOMContentLoaded",function(n){start()});
//# sourceMappingURL=main.js.map
